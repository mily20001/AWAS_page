<div class="container text-light">
    <h3>Status</h3>
    <table class="table table-dark table-striped">
        <thead>
        <tr>
            <th>Region</th>
            <th>Load</th>
            <th>Max load</th>
            <th>Status</th>
            ##>#<th>Toggle</th>###
        </tr>
        </thead>
        <tbody>
        ##body##
        </tbody>
    </table>

    <script>
        function handleToggle(target, req) {
            console.log(req.readyState);
            console.log(req);
            console.log(req.responseText);
            try {
                const res = JSON.parse(req.responseText);
                if (res.error !== undefined) {
                    console.err(target, res.error);
                    return;
                }
                document.getElementById(`switch_${target}`).className = `slider ${res.toggleStatus === 'on' ? 'checked' : ''} round`;
                document.getElementById(`status_${target}`).innerText = res.status;
                document.getElementById(`load_${target}`).innerText = `${parseFloat(res.currentLoad).toFixed(1)}kW`;
            }
            catch (e){
                return;
            }
        }

        ##script##
    </script>
</div>